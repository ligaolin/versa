import{aD as Q,r as Pe,as as je,M as Z,C as ee,D as R,S as P,ah as ce,R as j,a as x,ac as te,ab as He,aE as Ue,J as Ge,aF as Ve,G as E,av as he,aG as We,a0 as T,aj as ne,ak as de,l as m,c as L,d as oe,H as M,w as B,I as Je,L as D,aH as $,W as H,e as K,n as Ye,a1 as ue,ax as pe,T as fe,aI as Xe,N as Qe,aJ as ye,o as Ze,aK as et,aL as tt,a7 as O,A as nt,Y as dt,F as ot,aM as at,K as rt,t as st,_ as it,P as ge,ay as lt,q as ct,E as ke,i as ht,k as ut,__tla as pt}from"./index-8a19135e.js";import{O as ft,E as yt,__tla as gt}from"./other-c7b5f4f5.js";import{_ as kt,__tla as vt}from"./index-b03406ce.js";let ve,Nt=Promise.all([(()=>{try{return pt}catch{}})(),(()=>{try{return gt}catch{}})(),(()=>{try{return vt}catch{}})()]).then(async()=>{const q="$treeNodeId",ae=function(t,e){!e||e[q]||Object.defineProperty(e,q,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},J=function(t,e){return t?e[t]:e[q]},Y=(t,e,d)=>{const o=t.value.currentNode;d();const n=t.value.currentNode;o!==n&&e("current-change",n?n.data:null,n)},X=t=>{let e=!0,d=!0,o=!0;for(let n=0,a=t.length;n<a;n++){const r=t[n];(r.checked!==!0||r.indeterminate)&&(e=!1,r.disabled||(o=!1)),(r.checked!==!1||r.indeterminate)&&(d=!1)}return{all:e,none:d,allWithoutDisable:o,half:!e&&!d}},U=function(t){if(t.childNodes.length===0||t.loading)return;const{all:e,none:d,half:o}=X(t.childNodes);e?(t.checked=!0,t.indeterminate=!1):o?(t.checked=!1,t.indeterminate=!0):d&&(t.checked=!1,t.indeterminate=!1);const n=t.parent;!n||n.level===0||t.store.checkStrictly||U(n)},G=function(t,e){const d=t.store.props,o=t.data||{},n=d[e];if(typeof n=="function")return n(o,t);if(typeof n=="string")return o[n];if(typeof n>"u"){const a=o[e];return a===void 0?"":a}};let Ne=0;class _{constructor(e){this.id=Ne++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const d in e)Q(e,d)&&(this[d]=e[d]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const d=e.props;if(d&&typeof d.isLeaf<"u"){const a=G(this,"isLeaf");typeof a=="boolean"&&(this.isLeafByUser=a)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||ae(this,this.data),!this.data)return;const o=e.defaultExpandedKeys,n=e.key;n&&o&&o.includes(this.key)&&this.expand(null,e.autoExpandParent),n&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Array.isArray(e)||ae(this,e),this.data=e,this.childNodes=[];let d;this.level===0&&Array.isArray(this.data)?d=this.data:d=G(this,"children")||[];for(let o=0,n=d.length;o<n;o++)this.insertChild({data:d[o]})}get label(){return G(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return G(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const d=e.childNodes.indexOf(this);if(d>-1)return e.childNodes[d+1]}return null}get previousSibling(){const e=this.parent;if(e){const d=e.childNodes.indexOf(this);if(d>-1)return d>0?e.childNodes[d-1]:null}return null}contains(e,d=!0){return(this.childNodes||[]).some(o=>o===e||d&&o.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,d,o){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof _)){if(!o){const n=this.getChildren(!0);n.includes(e.data)||(typeof d>"u"||d<0?n.push(e.data):n.splice(d,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=Pe(new _(e)),e instanceof _&&e.initialize()}e.level=this.level+1,typeof d>"u"||d<0?this.childNodes.push(e):this.childNodes.splice(d,0,e),this.updateLeafState()}insertBefore(e,d){let o;d&&(o=this.childNodes.indexOf(d)),this.insertChild(e,o)}insertAfter(e,d){let o;d&&(o=this.childNodes.indexOf(d),o!==-1&&(o+=1)),this.insertChild(e,o)}removeChild(e){const d=this.getChildren()||[],o=d.indexOf(e.data);o>-1&&d.splice(o,1);const n=this.childNodes.indexOf(e);n>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(n,1)),this.updateLeafState()}removeChildByData(e){let d=null;for(let o=0;o<this.childNodes.length;o++)if(this.childNodes[o].data===e){d=this.childNodes[o];break}d&&this.removeChild(d)}expand(e,d){const o=()=>{if(d){let n=this.parent;for(;n.level>0;)n.expanded=!0,n=n.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(n=>{n.canFocus=!0})};this.shouldLoadData()?this.loadData(n=>{Array.isArray(n)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||U(this),o())}):o()}doCreateChildren(e,d={}){e.forEach(o=>{this.insertChild(Object.assign({data:o},d),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,d,o,n){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:r,allWithoutDisable:s}=X(this.childNodes);!this.isLeaf&&!r&&s&&(this.checked=!1,e=!1);const p=()=>{if(d){const i=this.childNodes;for(let h=0,k=i.length;h<k;h++){const g=i[h];n=n||e!==!1;const b=g.disabled?g.checked:n;g.setChecked(b,d,!0,n)}const{half:l,all:u}=X(i);u||(this.checked=u,this.indeterminate=l)}};if(this.shouldLoadData()){this.loadData(()=>{p(),U(this)},{checked:e!==!1});return}else p()}const a=this.parent;!a||a.level===0||o||U(a)}getChildren(e=!1){if(this.level===0)return this.data;const d=this.data;if(!d)return null;const o=this.store.props;let n="children";return o&&(n=o.children||"children"),d[n]===void 0&&(d[n]=null),e&&!d[n]&&(d[n]=[]),d[n]}updateChildren(){const e=this.getChildren()||[],d=this.childNodes.map(a=>a.data),o={},n=[];e.forEach((a,r)=>{const s=a[q];s&&d.findIndex(p=>p[q]===s)>=0?o[s]={index:r,data:a}:n.push({index:r,data:a})}),this.store.lazy||d.forEach(a=>{o[a[q]]||this.removeChildByData(a)}),n.forEach(({index:a,data:r})=>{this.insertChild({data:r},a)}),this.updateLeafState()}loadData(e,d={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(d).length)){this.loading=!0;const o=n=>{this.childNodes=[],this.doCreateChildren(n,d),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,n)};this.store.load(this,o)}else e&&e.call(this)}}class Ce{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const d in e)Q(e,d)&&(this[d]=e[d]);this.nodesMap={}}initialize(){if(this.root=new _({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,d=>{this.root.doCreateChildren(d),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const d=this.filterNodeMethod,o=this.lazy,n=function(a){const r=a.root?a.root.childNodes:a.childNodes;if(r.forEach(s=>{s.visible=d.call(s,e,s.data,s),n(s)}),!a.visible&&r.length){let s=!0;s=!r.some(p=>p.visible),a.root?a.root.visible=s===!1:a.visible=s===!1}e&&a.visible&&!a.isLeaf&&!o&&a.expand()};n(this)}setData(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof _)return e;const d=je(e)?J(this.key,e):e;return this.nodesMap[d]||null}insertBefore(e,d){const o=this.getNode(d);o.parent.insertBefore({data:e},o)}insertAfter(e,d){const o=this.getNode(d);o.parent.insertAfter({data:e},o)}remove(e){const d=this.getNode(e);d&&d.parent&&(d===this.currentNode&&(this.currentNode=null),d.parent.removeChild(d))}append(e,d){const o=d?this.getNode(d):this.root;o&&o.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],d=this.nodesMap;e.forEach(o=>{const n=d[o];n&&n.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const d=this.key;!e||!e.data||(d?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(d=>{this.deregisterNode(d)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,d=!1){const o=[],n=function(a){(a.root?a.root.childNodes:a.childNodes).forEach(r=>{(r.checked||d&&r.indeterminate)&&(!e||e&&r.isLeaf)&&o.push(r.data),n(r)})};return n(this),o}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(d=>(d||{})[this.key])}getHalfCheckedNodes(){const e=[],d=function(o){(o.root?o.root.childNodes:o.childNodes).forEach(n=>{n.indeterminate&&e.push(n.data),d(n)})};return d(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],d=this.nodesMap;for(const o in d)Q(d,o)&&e.push(d[o]);return e}updateChildren(e,d){const o=this.nodesMap[e];if(!o)return;const n=o.childNodes;for(let a=n.length-1;a>=0;a--){const r=n[a];this.remove(r.data)}for(let a=0,r=d.length;a<r;a++){const s=d[a];this.append(s,o.data)}}_setCheckedKeys(e,d=!1,o){const n=this._getAllNodes().sort((s,p)=>p.level-s.level),a=Object.create(null),r=Object.keys(o);n.forEach(s=>s.setChecked(!1,!1));for(let s=0,p=n.length;s<p;s++){const i=n[s],l=i.data[e].toString();if(!r.includes(l)){i.checked&&!a[l]&&i.setChecked(!1,!1);continue}let u=i.parent;for(;u&&u.level>0;)a[u.data[e]]=!0,u=u.parent;if(i.isLeaf||this.checkStrictly){i.setChecked(!0,!1);continue}if(i.setChecked(!0,!0),d){i.setChecked(!1,!1);const h=function(k){k.childNodes.forEach(g=>{g.isLeaf||g.setChecked(!1,!1),h(g)})};h(i)}}}setCheckedNodes(e,d=!1){const o=this.key,n={};e.forEach(a=>{n[(a||{})[o]]=!0}),this._setCheckedKeys(o,d,n)}setCheckedKeys(e,d=!1){this.defaultCheckedKeys=e;const o=this.key,n={};e.forEach(a=>{n[a]=!0}),this._setCheckedKeys(o,d,n)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(d=>{const o=this.getNode(d);o&&o.expand(null,this.autoExpandParent)})}setChecked(e,d,o){const n=this.getNode(e);n&&n.setChecked(!!d,o)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const d=this.currentNode;d&&(d.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,d=!0){const o=e[this.key],n=this.nodesMap[o];this.setCurrentNode(n),d&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,d=!0){if(e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const o=this.getNode(e);o&&(this.setCurrentNode(o),d&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const xe=ee({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(t){const e=R("tree"),d=P("NodeInstance"),o=P("RootTree");return()=>{const n=t.node,{data:a,store:r}=n;return t.renderContent?t.renderContent(ce,{_self:d,node:n,data:a,store:r}):o.ctx.slots.default?o.ctx.slots.default({node:n,data:a}):ce("span",{class:e.be("node","label")},[n.label])}}});var me=Z(xe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue"]]);function re(t){const e=P("TreeNodeMap",null),d={treeNodeExpand:o=>{t.node!==o&&t.node.collapse()},children:[]};return e&&e.children.push(d),j("TreeNodeMap",d),{broadcastExpanded:o=>{if(t.accordion)for(const n of d.children)n.treeNodeExpand(o)}}}const se=Symbol("dragEvents");function be({props:t,ctx:e,el$:d,dropIndicator$:o,store:n}){const a=R("tree"),r=x({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return j(se,{treeNodeDragStart:({event:s,treeNode:p})=>{if(typeof t.allowDrag=="function"&&!t.allowDrag(p.node))return s.preventDefault(),!1;s.dataTransfer.effectAllowed="move";try{s.dataTransfer.setData("text/plain","")}catch{}r.value.draggingNode=p,e.emit("node-drag-start",p.node,s)},treeNodeDragOver:({event:s,treeNode:p})=>{const i=p,l=r.value.dropNode;l&&l.node.id!==i.node.id&&te(l.$el,a.is("drop-inner"));const u=r.value.draggingNode;if(!u||!i)return;let h=!0,k=!0,g=!0,b=!0;typeof t.allowDrop=="function"&&(h=t.allowDrop(u.node,i.node,"prev"),b=k=t.allowDrop(u.node,i.node,"inner"),g=t.allowDrop(u.node,i.node,"next")),s.dataTransfer.dropEffect=k||h||g?"move":"none",(h||k||g)&&(l==null?void 0:l.node.id)!==i.node.id&&(l&&e.emit("node-drag-leave",u.node,l.node,s),e.emit("node-drag-enter",u.node,i.node,s)),(h||k||g)&&(r.value.dropNode=i),i.node.nextSibling===u.node&&(g=!1),i.node.previousSibling===u.node&&(h=!1),i.node.contains(u.node,!1)&&(k=!1),(u.node===i.node||u.node.contains(i.node))&&(h=!1,k=!1,g=!1);const S=i.$el.querySelector(`.${a.be("node","content")}`).getBoundingClientRect(),w=d.value.getBoundingClientRect();let C;const I=h?k?.25:g?.45:1:-1,f=g?k?.75:h?.55:0:1;let v=-9999;const N=s.clientY-S.top;N<S.height*I?C="before":N>S.height*f?C="after":k?C="inner":C="none";const A=i.$el.querySelector(`.${a.be("node","expand-icon")}`).getBoundingClientRect(),W=o.value;C==="before"?v=A.top-w.top:C==="after"&&(v=A.bottom-w.top),W.style.top=`${v}px`,W.style.left=`${A.right-w.left}px`,C==="inner"?He(i.$el,a.is("drop-inner")):te(i.$el,a.is("drop-inner")),r.value.showDropIndicator=C==="before"||C==="after",r.value.allowDrop=r.value.showDropIndicator||b,r.value.dropType=C,e.emit("node-drag-over",u.node,i.node,s)},treeNodeDragEnd:s=>{const{draggingNode:p,dropType:i,dropNode:l}=r.value;if(s.preventDefault(),s.dataTransfer.dropEffect="move",p&&l){const u={data:p.node.data};i!=="none"&&p.node.remove(),i==="before"?l.node.parent.insertBefore(u,l.node):i==="after"?l.node.parent.insertAfter(u,l.node):i==="inner"&&l.node.insertChild(u),i!=="none"&&n.value.registerNode(u),te(l.$el,a.is("drop-inner")),e.emit("node-drag-end",p.node,l.node,i,s),i!=="none"&&e.emit("node-drop",p.node,l.node,i,s)}p&&!l&&e.emit("node-drag-end",p.node,null,i,s),r.value.showDropIndicator=!1,r.value.draggingNode=null,r.value.dropNode=null,r.value.allowDrop=!0}}),{dragState:r}}const Ee=ee({name:"ElTreeNode",components:{ElCollapseTransition:kt,ElCheckbox:Ue,NodeContent:me,ElIcon:Ge,Loading:Ve},props:{node:{type:_,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(t,e){const d=R("tree"),{broadcastExpanded:o}=re(t),n=P("RootTree"),a=x(!1),r=x(!1),s=x(null),p=x(null),i=x(null),l=P(se),u=fe();j("NodeInstance",u),t.node.expanded&&(a.value=!0,r.value=!0);const h=n.props.props.children||"children";E(()=>{const f=t.node.data[h];return f&&[...f]},()=>{t.node.updateChildren()}),E(()=>t.node.indeterminate,f=>{b(t.node.checked,f)}),E(()=>t.node.checked,f=>{b(f,t.node.indeterminate)}),E(()=>t.node.expanded,f=>{he(()=>a.value=f),f&&(r.value=!0)});const k=f=>J(n.props.nodeKey,f.data),g=f=>{const v=t.props.class;if(!v)return{};let N;if(Xe(v)){const{data:A}=f;N=v(A,f)}else N=v;return Qe(N)?{[N]:!0}:N},b=(f,v)=>{(s.value!==f||p.value!==v)&&n.ctx.emit("check-change",t.node.data,f,v),s.value=f,p.value=v},S=f=>{Y(n.store,n.ctx.emit,()=>n.store.value.setCurrentNode(t.node)),n.currentNode.value=t.node,n.props.expandOnClickNode&&C(),n.props.checkOnClickNode&&!t.node.disabled&&I(null,{target:{checked:!t.node.checked}}),n.ctx.emit("node-click",t.node.data,t.node,u,f)},w=f=>{n.instance.vnode.props.onNodeContextmenu&&(f.stopPropagation(),f.preventDefault()),n.ctx.emit("node-contextmenu",f,t.node.data,t.node,u)},C=()=>{t.node.isLeaf||(a.value?(n.ctx.emit("node-collapse",t.node.data,t.node,u),t.node.collapse()):(t.node.expand(),e.emit("node-expand",t.node.data,t.node,u)))},I=(f,v)=>{t.node.setChecked(v.target.checked,!n.props.checkStrictly),he(()=>{const N=n.store.value;n.ctx.emit("check",t.node.data,{checkedNodes:N.getCheckedNodes(),checkedKeys:N.getCheckedKeys(),halfCheckedNodes:N.getHalfCheckedNodes(),halfCheckedKeys:N.getHalfCheckedKeys()})})};return{ns:d,node$:i,tree:n,expanded:a,childNodeRendered:r,oldChecked:s,oldIndeterminate:p,getNodeKey:k,getNodeClass:g,handleSelectChange:b,handleClick:S,handleContextMenu:w,handleExpandIconClick:C,handleCheckChange:I,handleChildNodeExpand:(f,v,N)=>{o(v),n.ctx.emit("node-expand",f,v,N)},handleDragStart:f=>{n.props.draggable&&l.treeNodeDragStart({event:f,treeNode:t})},handleDragOver:f=>{f.preventDefault(),n.props.draggable&&l.treeNodeDragOver({event:f,treeNode:{$el:i.value,node:t.node}})},handleDrop:f=>{f.preventDefault()},handleDragEnd:f=>{n.props.draggable&&l.treeNodeDragEnd(f)},CaretRight:We}}}),De=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],Ke=["aria-expanded"];function we(t,e,d,o,n,a){const r=T("el-icon"),s=T("el-checkbox"),p=T("loading"),i=T("node-content"),l=T("el-tree-node"),u=T("el-collapse-transition");return ne((m(),L("div",{ref:"node$",class:D([t.ns.b("node"),t.ns.is("expanded",t.expanded),t.ns.is("current",t.node.isCurrent),t.ns.is("hidden",!t.node.visible),t.ns.is("focusable",!t.node.disabled),t.ns.is("checked",!t.node.disabled&&t.node.checked),t.getNodeClass(t.node)]),role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.props.draggable,"data-key":t.getNodeKey(t.node),onClick:e[1]||(e[1]=$((...h)=>t.handleClick&&t.handleClick(...h),["stop"])),onContextmenu:e[2]||(e[2]=(...h)=>t.handleContextMenu&&t.handleContextMenu(...h)),onDragstart:e[3]||(e[3]=$((...h)=>t.handleDragStart&&t.handleDragStart(...h),["stop"])),onDragover:e[4]||(e[4]=$((...h)=>t.handleDragOver&&t.handleDragOver(...h),["stop"])),onDragend:e[5]||(e[5]=$((...h)=>t.handleDragEnd&&t.handleDragEnd(...h),["stop"])),onDrop:e[6]||(e[6]=$((...h)=>t.handleDrop&&t.handleDrop(...h),["stop"]))},[oe("div",{class:D(t.ns.be("node","content")),style:Ye({paddingLeft:(t.node.level-1)*t.tree.props.indent+"px"})},[t.tree.props.icon||t.CaretRight?(m(),M(r,{key:0,class:D([t.ns.be("node","expand-icon"),t.ns.is("leaf",t.node.isLeaf),{expanded:!t.node.isLeaf&&t.expanded}]),onClick:$(t.handleExpandIconClick,["stop"])},{default:B(()=>[(m(),M(Je(t.tree.props.icon||t.CaretRight)))]),_:1},8,["class","onClick"])):H("v-if",!0),t.showCheckbox?(m(),M(s,{key:1,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:!!t.node.disabled,onClick:e[0]||(e[0]=$(()=>{},["stop"])),onChange:t.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):H("v-if",!0),t.node.loading?(m(),M(r,{key:2,class:D([t.ns.be("node","loading-icon"),t.ns.is("loading")])},{default:B(()=>[K(p)]),_:1},8,["class"])):H("v-if",!0),K(i,{node:t.node,"render-content":t.renderContent},null,8,["node","render-content"])],6),K(u,null,{default:B(()=>[!t.renderAfterExpand||t.childNodeRendered?ne((m(),L("div",{key:0,class:D(t.ns.be("node","children")),role:"group","aria-expanded":t.expanded},[(m(!0),L(ue,null,pe(t.node.childNodes,h=>(m(),M(l,{key:t.getNodeKey(h),"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:h,accordion:t.accordion,props:t.props,onNodeExpand:t.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,Ke)),[[de,t.expanded]]):H("v-if",!0)]),_:1})],42,De)),[[de,t.node.visible]])}var _e=Z(Ee,[["render",we],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue"]]);function Se({el$:t},e){const d=R("tree"),o=ye([]),n=ye([]);Ze(()=>{a()}),et(()=>{o.value=Array.from(t.value.querySelectorAll("[role=treeitem]")),n.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"))}),E(n,r=>{r.forEach(s=>{s.setAttribute("tabindex","-1")})}),tt(t,"keydown",r=>{const s=r.target;if(!s.className.includes(d.b("node")))return;const p=r.code;o.value=Array.from(t.value.querySelectorAll(`.${d.is("focusable")}[role=treeitem]`));const i=o.value.indexOf(s);let l;if([O.up,O.down].includes(p)){if(r.preventDefault(),p===O.up){l=i===-1?0:i!==0?i-1:o.value.length-1;const h=l;for(;!e.value.getNode(o.value[l].dataset.key).canFocus;){if(l--,l===h){l=-1;break}l<0&&(l=o.value.length-1)}}else{l=i===-1?0:i<o.value.length-1?i+1:0;const h=l;for(;!e.value.getNode(o.value[l].dataset.key).canFocus;){if(l++,l===h){l=-1;break}l>=o.value.length&&(l=0)}}l!==-1&&o.value[l].focus()}[O.left,O.right].includes(p)&&(r.preventDefault(),s.click());const u=s.querySelector('[type="checkbox"]');[O.enter,O.space].includes(p)&&u&&(r.preventDefault(),u.click())});const a=()=>{var r;o.value=Array.from(t.value.querySelectorAll(`.${d.is("focusable")}[role=treeitem]`)),n.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"));const s=t.value.querySelectorAll(`.${d.is("checked")}[role=treeitem]`);if(s.length){s[0].setAttribute("tabindex","0");return}(r=o.value[0])==null||r.setAttribute("tabindex","0")}}const Ae=ee({name:"ElTree",components:{ElTreeNode:_e},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:nt}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(t,e){const{t:d}=dt(),o=R("tree"),n=x(new Ce({key:t.nodeKey,data:t.data,lazy:t.lazy,props:t.props,load:t.load,currentNodeKey:t.currentNodeKey,checkStrictly:t.checkStrictly,checkDescendants:t.checkDescendants,defaultCheckedKeys:t.defaultCheckedKeys,defaultExpandedKeys:t.defaultExpandedKeys,autoExpandParent:t.autoExpandParent,defaultExpandAll:t.defaultExpandAll,filterNodeMethod:t.filterNodeMethod}));n.value.initialize();const a=x(n.value.root),r=x(null),s=x(null),p=x(null),{broadcastExpanded:i}=re(t),{dragState:l}=be({props:t,ctx:e,el$:s,dropIndicator$:p,store:n});Se({el$:s},n);const u=ot(()=>{const{childNodes:c}=a.value;return!c||c.length===0||c.every(({visible:y})=>!y)});E(()=>t.currentNodeKey,c=>{n.value.setCurrentNodeKey(c)}),E(()=>t.defaultCheckedKeys,c=>{n.value.setDefaultCheckedKey(c)}),E(()=>t.defaultExpandedKeys,c=>{n.value.setDefaultExpandedKeys(c)}),E(()=>t.data,c=>{n.value.setData(c)},{deep:!0}),E(()=>t.checkStrictly,c=>{n.value.checkStrictly=c});const h=c=>{if(!t.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");n.value.filter(c)},k=c=>J(t.nodeKey,c.data),g=c=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const y=n.value.getNode(c);if(!y)return[];const z=[y.data];let F=y.parent;for(;F&&F!==a.value;)z.push(F.data),F=F.parent;return z.reverse()},b=(c,y)=>n.value.getCheckedNodes(c,y),S=c=>n.value.getCheckedKeys(c),w=()=>{const c=n.value.getCurrentNode();return c?c.data:null},C=()=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const c=w();return c?c[t.nodeKey]:null},I=(c,y)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");n.value.setCheckedNodes(c,y)},f=(c,y)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");n.value.setCheckedKeys(c,y)},v=(c,y,z)=>{n.value.setChecked(c,y,z)},N=()=>n.value.getHalfCheckedNodes(),A=()=>n.value.getHalfCheckedKeys(),W=(c,y=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");Y(n,e.emit,()=>n.value.setUserCurrentNode(c,y))},$e=(c,y=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");Y(n,e.emit,()=>n.value.setCurrentNodeKey(c,y))},Oe=c=>n.value.getNode(c),qe=c=>{n.value.remove(c)},Ie=(c,y)=>{n.value.append(c,y)},ze=(c,y)=>{n.value.insertBefore(c,y)},Me=(c,y)=>{n.value.insertAfter(c,y)},Fe=(c,y,z)=>{i(y),e.emit("node-expand",c,y,z)},Re=(c,y)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");n.value.updateChildren(c,y)};return j("RootTree",{ctx:e,props:t,store:n,root:a,currentNode:r,instance:fe()}),j(at,void 0),{ns:o,store:n,root:a,currentNode:r,dragState:l,el$:s,dropIndicator$:p,isEmpty:u,filter:h,getNodeKey:k,getNodePath:g,getCheckedNodes:b,getCheckedKeys:S,getCurrentNode:w,getCurrentKey:C,setCheckedNodes:I,setCheckedKeys:f,setChecked:v,getHalfCheckedNodes:N,getHalfCheckedKeys:A,setCurrentNode:W,setCurrentKey:$e,t:d,getNode:Oe,remove:qe,append:Ie,insertBefore:ze,insertAfter:Me,handleNodeExpand:Fe,updateKeyChildren:Re}}});function Te(t,e,d,o,n,a){const r=T("el-tree-node");return m(),L("div",{ref:"el$",class:D([t.ns.b(),t.ns.is("dragging",!!t.dragState.draggingNode),t.ns.is("drop-not-allow",!t.dragState.allowDrop),t.ns.is("drop-inner",t.dragState.dropType==="inner"),{[t.ns.m("highlight-current")]:t.highlightCurrent}]),role:"tree"},[(m(!0),L(ue,null,pe(t.root.childNodes,s=>(m(),M(r,{key:t.getNodeKey(s),node:s,props:t.props,accordion:t.accordion,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent,onNodeExpand:t.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),t.isEmpty?(m(),L("div",{key:0,class:D(t.ns.e("empty-block"))},[rt(t.$slots,"empty",{},()=>{var s;return[oe("span",{class:D(t.ns.e("empty-text"))},st((s=t.emptyText)!=null?s:t.t("el.tree.emptyText")),3)]})],2)):H("v-if",!0),ne(oe("div",{ref:"dropIndicator$",class:D(t.ns.e("drop-indicator"))},null,2),[[de,t.dragState.showDropIndicator]])],2)}var V=Z(Ae,[["render",Te],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue"]]);V.install=t=>{t.component(V.name,V)};const Le=V,Be=Le;let ie,le;ie={class:"edit_table"},le={__name:"edit",props:["data"],emits:["submit"],setup(t,{emit:e}){const d=t,o=(i,l)=>i.level==2?"flex":null,n=x({id:"",name:"",auth_ids:""});ft(d.data,n.value);const a=()=>{n.value.auth_ids=","+s.value.getCheckedKeys().join(","),yt([[!n.value.name,"\u7EC4\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"]])&&ge("UserGroupAdminEdit",n.value).then(i=>{i.code==2e3?(ke({message:i.msg,type:"success"}),e("submit")):ke({message:i.msg,type:"error"})})},r=x([]),s=x(),p=x(d.data.auth_ids?d.data.auth_ids.slice(1).split(","):[]);return ge("UserAuthGetListByPid",{pid:0,state:"\u5F00\u542F"}).then(i=>{i.code==2e3&&(r.value=i.data)}),(i,l)=>{const u=ht,h=lt,k=Be,g=ut;return m(),L("table",ie,[K(h,{label:"\u7EC4\u540D\u79F0",required:""},{default:B(()=>[K(u,{clearable:"",modelValue:n.value.name,"onUpdate:modelValue":l[0]||(l[0]=b=>n.value.name=b)},null,8,["modelValue"])]),_:1}),K(h,{label:"\u6743\u9650"},{default:B(()=>[K(k,{ref_key:"treeRef",ref:s,data:r.value,"show-checkbox":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1,props:{label:"name",class:o},"default-checked-keys":p.value},null,8,["data","props","default-checked-keys"])]),_:1}),K(h,null,{default:B(()=>[K(g,{type:"primary",onClick:a},{default:B(()=>[ct("\u63D0\u4EA4")]),_:1})]),_:1})])}}},ve=it(le,[["__scopeId","data-v-fdb06d08"]])});export{Nt as __tla,ve as default};
