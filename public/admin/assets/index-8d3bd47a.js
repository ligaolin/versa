import{_ as L,a as u,l as p,c as b,H as C,n as O,u as f,h as g,W as x,e as l,w as t,d as k,a1 as $,j as Q,a2 as R,Z as X,$ as Y,G as ee,t as z,az as ae,q as n,s as le,v as te,b8 as j,E as ie,i as se,k as re,b9 as ne,a6 as oe,__tla as de}from"./index-8a19135e.js";import ue,{__tla as pe}from"./edit-182735e2.js";import ce,{__tla as me}from"./add-804ac8dc.js";import{__tla as ve}from"./other-c7b5f4f5.js";let A,_e=Promise.all([(()=>{try{return de}catch{}})(),(()=>{try{return pe}catch{}})(),(()=>{try{return me}catch{}})(),(()=>{try{return ve}catch{}})()]).then(async()=>{const B=["src"],H={class:"previewBox"},K=["src"],T={__name:"media",props:{item:{type:Object,defaullt:{}},width:{type:String,default:"70px"},height:{type:String,default:"70px"},fit:{type:String,default:"cover"}},setup(a){const _=u(!1),o=u({}),c=s=>{o.value=s,_.value=!0};return(s,d)=>{const h=Q,I=R;return p(),b($,null,[a.item.type=="image"?(p(),C(h,{key:0,class:"image",style:O({width:a.width,height:a.height}),onClick:d[0]||(d[0]=r=>c(a.item)),src:a.item.path?f(g)+a.item.path:"",fit:a.fit},null,8,["style","src","fit"])):a.item.type=="video"?(p(),b("video",{key:1,class:"video",onClick:d[1]||(d[1]=r=>c(a.item)),src:a.item.path?f(g)+a.item.path:"",style:O({width:a.width,height:a.height})},null,12,B)):x("",!0),l(I,{modelValue:_.value,"onUpdate:modelValue":d[2]||(d[2]=r=>_.value=r),title:"\u9884\u89C8",width:"80%","append-to-body":""},{default:t(()=>[k("div",H,[o.value.type=="image"?(p(),C(h,{key:0,class:"preview",src:f(g)+o.value.path,fit:"contain"},null,8,["src"])):o.value.type=="video"?(p(),b("video",{key:1,class:"preview",src:f(g)+o.value.path,controls:""},null,8,K)):x("",!0)])]),_:1},8,["modelValue"])],64)}}},W=L(T,[["__scopeId","data-v-404cb400"]]);let E,D,S,q;E=a=>(le("data-v-3c1af5dc"),a=a(),te(),a),D={class:"tips"},S=E(()=>k("div",{class:"tips"},"\u7F16\u8F91\u6216\u5220\u9664\u53EF\u80FD\u5BFC\u81F4\u4E4B\u524D\u4E0A\u4F20\u7684\u6587\u4EF6\u4E22\u5931\uFF0C\u64CD\u4F5C\u524D\u8BF7\u786E\u4FDD\u88AB\u64CD\u4F5C\u7684\u6587\u4EF6\u6216\u6587\u4EF6\u5939\u65E0\u9700\u518D\u88AB\u4F7F\u7528",-1)),q={__name:"index",setup(a){const _=X(),o=Y(),c=u(""),s=u(o.query.dir||"static");ee(()=>o.query.dir,e=>{e?s.value=e:s.value="static",r.value.Init()},{deep:!0});const d=()=>{let e={dir:s.value};return c.value&&(e.name=c.value),["FileList",e]},h=u(0),I=e=>{e.code==2e3&&(h.value=e.total)},r=u(null),P=e=>{r.value.Del("FileDel",e,"path")},V=u(),U=(e={})=>{e.name?(V.value=j(ue),r.value.Edit("\u7F16\u8F91 "+e.name,e)):(V.value=j(ce),r.value.Edit("\u6DFB\u52A0\u6587\u4EF6\u5939",{path:s.value}))},F=e=>{e||(e=s.value.replace(/\/[^\/]*$/,"")),_.push("/setting/file/index?dir="+e)},Z=u({Authorization:localStorage.getItem("adminToken")}),G=(e,y)=>{e.response&&e.response.code&&(e.response.code==2e3?r.value.Init():e.response.code==1e3&&ie({message:e.response.msg,type:"error"}))};return(e,y)=>{const J=se,m=re,M=ne,v=oe,N=ae;return p(),b($,null,[k("div",null,"\u5F53\u524D\u6587\u4EF6\u5939\uFF1A"+z(s.value),1),k("div",D,"\u603B\u6570\u91CF\uFF1A"+z(h.value),1),S,l(N,{getData:d,editPage:V.value,ref_key:"listEleme",ref:r,rowKey:"path",page:!1,onListEnd:I},{search:t(()=>[k("label",null,[n("\u540D\u79F0\uFF1A"),l(J,{clearable:"",modelValue:c.value,"onUpdate:modelValue":y[0]||(y[0]=i=>c.value=i)},null,8,["modelValue"])])]),operation:t(({ids:i})=>[s.value!="static"?(p(),C(m,{key:0,type:"primary",onClick:y[1]||(y[1]=w=>F())},{default:t(()=>[n("\u8FD4\u56DE\u4E0A\u7EA7")]),_:1})):x("",!0),l(M,{action:f(g)+"/api/admin/other.Upload/Index?dir="+s.value,headers:Z.value,multiple:"","show-file-list":!1,"on-change":G,class:"upload"},{default:t(()=>[l(m,{type:"primary"},{default:t(()=>[n("\u4E0A\u4F20\u6587\u4EF6")]),_:1})]),_:1},8,["action","headers"]),l(m,{type:"primary",onClick:U},{default:t(()=>[n("\u6DFB\u52A0\u6587\u4EF6\u5939")]),_:1}),l(m,{type:"danger",onClick:w=>P(i)},{default:t(()=>[n("\u6279\u91CF\u5220\u9664")]),_:2},1032,["onClick"])]),default:t(()=>[l(v,{type:"selection",width:"55",align:"center"}),l(v,{prop:"name",sortable:"",label:"\u540D\u79F0",align:"center"}),l(v,{label:"\u9884\u89C8",align:"center"},{default:t(i=>[l(W,{item:i.row},null,8,["item"])]),_:1}),l(v,{prop:"fileOrDir",label:"\u6587\u4EF6|\u6587\u4EF6\u5939",align:"center"}),l(v,{prop:"dir",sortable:"",label:"\u6587\u4EF6\u7C7B\u578B",align:"center"},{default:t(i=>[n(z(i.row.type=="dir"?"-":i.row.type),1)]),_:1}),l(v,{label:"\u64CD\u4F5C",align:"center",width:"220"},{default:t(i=>[i.row.type=="dir"?(p(),C(m,{key:0,type:"primary",size:"small",onClick:w=>F(i.row.path)},{default:t(()=>[n("\u4E0B\u7EA7")]),_:2},1032,["onClick"])):x("",!0),l(m,{type:"primary",size:"small",onClick:w=>U(i.row)},{default:t(()=>[n("\u7F16\u8F91")]),_:2},1032,["onClick"]),l(m,{type:"danger",size:"small",onClick:w=>P(i.row.path)},{default:t(()=>[n("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["editPage"])],64)}}},A=L(q,[["__scopeId","data-v-3c1af5dc"]])});export{_e as __tla,A as default};
