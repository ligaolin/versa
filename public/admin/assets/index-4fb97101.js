import{_ as U,a as d,l as c,c as k,H as w,n as j,W as b,e as l,w as t,d as f,a1 as F,j as M,a2 as N,Z as Q,$ as R,G as X,t as E,az as Y,q as n,u as ee,h as ae,s as le,v as te,b8 as L,E as ie,i as se,k as re,b9 as ne,a6 as oe,__tla as ue}from"./index-7aad57f9.js";import de,{__tla as ce}from"./edit-82fb3b86.js";import pe,{__tla as me}from"./add-773b9896.js";import{__tla as ve}from"./other-1d706a0b.js";let O,_e=Promise.all([(()=>{try{return ue}catch{}})(),(()=>{try{return ce}catch{}})(),(()=>{try{return me}catch{}})(),(()=>{try{return ve}catch{}})()]).then(async()=>{const $=["src"],A={class:"previewBox"},B=["src"],G={__name:"media",props:{item:{type:Object,defaullt:{}},width:{type:String,default:"70px"},height:{type:String,default:"70px"},fit:{type:String,default:"cover"}},setup(a){const _=d(!1),o=d({}),p=s=>{o.value=s,_.value=!0};return(s,u)=>{const h=M,C=N;return c(),k(F,null,[a.item.type=="image"?(c(),w(h,{key:0,class:"image",style:j({width:a.width,height:a.height}),onClick:u[0]||(u[0]=r=>p(a.item)),src:a.item.url?a.item.url:"",fit:a.fit},null,8,["style","src","fit"])):a.item.type=="video"?(c(),k("video",{key:1,class:"video",onClick:u[1]||(u[1]=r=>p(a.item)),src:a.item.url?a.item.url:"",style:j({width:a.width,height:a.height})},null,12,$)):b("",!0),l(C,{modelValue:_.value,"onUpdate:modelValue":u[2]||(u[2]=r=>_.value=r),title:"\u9884\u89C8",width:"80%","append-to-body":""},{default:t(()=>[f("div",A,[o.value.type=="image"?(c(),w(h,{key:0,class:"preview",src:o.value.url,fit:"contain"},null,8,["src"])):o.value.type=="video"?(c(),k("video",{key:1,class:"preview",src:o.value.url,controls:""},null,8,B)):b("",!0)])]),_:1},8,["modelValue"])],64)}}},H=U(G,[["__scopeId","data-v-dab0a4d0"]]);let I,V,z,D;I=a=>(le("data-v-3c1af5dc"),a=a(),te(),a),V={class:"tips"},z=I(()=>f("div",{class:"tips"},"\u7F16\u8F91\u6216\u5220\u9664\u53EF\u80FD\u5BFC\u81F4\u4E4B\u524D\u4E0A\u4F20\u7684\u6587\u4EF6\u4E22\u5931\uFF0C\u64CD\u4F5C\u524D\u8BF7\u786E\u4FDD\u88AB\u64CD\u4F5C\u7684\u6587\u4EF6\u6216\u6587\u4EF6\u5939\u65E0\u9700\u518D\u88AB\u4F7F\u7528",-1)),D={__name:"index",setup(a){const _=Q(),o=R(),p=d(""),s=d(o.query.dir||"static");X(()=>o.query.dir,e=>{e?s.value=e:s.value="static",r.value.Init()},{deep:!0});const u=()=>{let e={dir:s.value};return p.value&&(e.name=p.value),["FileList",e]},h=d(0),C=e=>{e.code==2e3&&(h.value=e.total)},r=d(null),S=e=>{r.value.Del("FileDel",e,"path")},x=d(),q=(e={})=>{e.name?(x.value=L(de),r.value.Edit("\u7F16\u8F91 "+e.name,e)):(x.value=L(pe),r.value.Edit("\u6DFB\u52A0\u6587\u4EF6\u5939",{path:s.value}))},P=e=>{e||(e=s.value.replace(/\/[^\/]*$/,"")),_.push("/setting/file/index?dir="+e)},K=d({Authorization:localStorage.getItem("adminToken")}),T=(e,y)=>{e.response&&e.response.code&&(e.response.code==2e3?r.value.Init():e.response.code==1e3&&ie({message:e.response.msg,type:"error"}))};return(e,y)=>{const W=se,m=re,Z=ne,v=oe,J=Y;return c(),k(F,null,[f("div",null,"\u5F53\u524D\u6587\u4EF6\u5939\uFF1A"+E(s.value),1),f("div",V,"\u603B\u6570\u91CF\uFF1A"+E(h.value),1),z,l(J,{getData:u,editPage:x.value,ref_key:"listEleme",ref:r,rowKey:"path",page:!1,onListEnd:C},{search:t(()=>[f("label",null,[n("\u540D\u79F0\uFF1A"),l(W,{clearable:"",modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=i=>p.value=i)},null,8,["modelValue"])])]),operation:t(({ids:i})=>[s.value!="static"?(c(),w(m,{key:0,type:"primary",onClick:y[1]||(y[1]=g=>P())},{default:t(()=>[n("\u8FD4\u56DE\u4E0A\u7EA7")]),_:1})):b("",!0),l(Z,{action:ee(ae)+"/api/admin/other.Upload/Index?dir="+s.value,headers:K.value,multiple:"","show-file-list":!1,"on-change":T,class:"upload"},{default:t(()=>[l(m,{type:"primary"},{default:t(()=>[n("\u4E0A\u4F20\u6587\u4EF6")]),_:1})]),_:1},8,["action","headers"]),l(m,{type:"primary",onClick:q},{default:t(()=>[n("\u6DFB\u52A0\u6587\u4EF6\u5939")]),_:1}),l(m,{type:"danger",onClick:g=>S(i)},{default:t(()=>[n("\u6279\u91CF\u5220\u9664")]),_:2},1032,["onClick"])]),default:t(()=>[l(v,{type:"selection",width:"55",align:"center"}),l(v,{prop:"name",sortable:"",label:"\u540D\u79F0",align:"center"}),l(v,{label:"\u9884\u89C8",align:"center"},{default:t(i=>[l(H,{item:i.row},null,8,["item"])]),_:1}),l(v,{prop:"fileOrDir",label:"\u6587\u4EF6|\u6587\u4EF6\u5939",align:"center"}),l(v,{prop:"dir",sortable:"",label:"\u6587\u4EF6\u7C7B\u578B",align:"center"},{default:t(i=>[n(E(i.row.type=="dir"?"-":i.row.type),1)]),_:1}),l(v,{label:"\u64CD\u4F5C",align:"center",width:"220"},{default:t(i=>[i.row.type=="dir"?(c(),w(m,{key:0,type:"primary",size:"small",onClick:g=>P(i.row.path)},{default:t(()=>[n("\u4E0B\u7EA7")]),_:2},1032,["onClick"])):b("",!0),l(m,{type:"primary",size:"small",onClick:g=>q(i.row)},{default:t(()=>[n("\u7F16\u8F91")]),_:2},1032,["onClick"]),l(m,{type:"danger",size:"small",onClick:g=>S(i.row.path)},{default:t(()=>[n("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["editPage"])],64)}}},O=U(D,[["__scopeId","data-v-3c1af5dc"]])});export{_e as __tla,O as default};
